

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to Integrate a Tool in DE &mdash; YOUR QUICKSTART NAME HERE as topic_quick_start 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'1.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/cyverse.js"></script>
        <script type="text/javascript" src="_static/intercom-script-for-learning.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/cyverse.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> YOUR QUICKSTART NAME HERE as topic_quick_start
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#"><strong>How to Integrate a Tool in DE</strong></a><ul>
<li><a class="reference internal" href="#goal">Goal</a></li>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a><ul>
<li><a class="reference internal" href="#downloads-access-and-services">Downloads, access, and services</a></li>
<li><a class="reference internal" href="#platform-s">Platform(s)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#steps-to-follow"><em>Steps to Follow</em></a><ul>
<li><a class="reference internal" href="#summary"><em>Summary</em></a></li>
<li><a class="reference internal" href="#additional-information-help">Additional information, help</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">YOUR QUICKSTART NAME HERE as topic_quick_start</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li><strong>How to Integrate a Tool in DE</strong></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p><a class="reference external" href="http://learning.cyverse.org/"><img alt="CyVerse logo" src="_images/cyverse_rgb.png" style="width: 500px; height: 100px;" /></a></p>
<p><a class="reference external" href="http://learning.cyverse.org/"><img alt="Home_Icon" src="_images/homeicon.png" style="width: 25px; height: 25px;" /></a>
<a class="reference external" href="http://learning.cyverse.org/">Learning Center Home</a></p>
<div class="section" id="how-to-integrate-a-tool-in-de">
<h1><strong>How to Integrate a Tool in DE</strong><a class="headerlink" href="#how-to-integrate-a-tool-in-de" title="Permalink to this headline">¶</a></h1>
<div class="section" id="goal">
<h2>Goal<a class="headerlink" href="#goal" title="Permalink to this headline">¶</a></h2>
<p>This tutorial will help you understand the process and how a tool can be integrated in the
Discovery Environment using Github and Docker.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<div class="section" id="downloads-access-and-services">
<h3>Downloads, access, and services<a class="headerlink" href="#downloads-access-and-services" title="Permalink to this headline">¶</a></h3>
<p><em>In order to complete this tutorial you will need access to the following services/software</em></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Prerequisite</th>
<th class="head">Preparation/Notes</th>
<th class="head">Link/Download</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>CyVerse account</td>
<td>You will need a CyVerse account to complete this exercise</td>
<td><a href="https://user.cyverse.org/" target="_blank">CyVerse User Portal</a></td>
</tr>
<tr class="row-odd"><td>Docker account</td>
<td>You need your docker account to add the tool to your docker account</td>
<td><a class="reference external" href="https://id.docker.com/login//">Docker login Portal</a></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="platform-s">
<h3>Platform(s)<a class="headerlink" href="#platform-s" title="Permalink to this headline">¶</a></h3>
<p><em>We will use the following CyVerse platform(s):</em></p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Platform</th>
<th class="head">Interface</th>
<th class="head">Link</th>
<th class="head">Platform Documentation</th>
<th class="head">Quick Start</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Discovery Environment</td>
<td>Web/Point-and-click</td>
<td><a href="https://de.cyverse.org/de/" target="blank">Discovery Environment</a></td>
<td><a href="https://wiki.cyverse.org/wiki/display/DEmanual/Table+of+Contents" target="blank">DE Manual</a></td>
<td><a href="http://learning.cyverse.org/projects/cyverse-discovery-environment-guide/" target="blank">Discovery Environment Guide</a></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="steps-to-follow">
<h2><em>Steps to Follow</em><a class="headerlink" href="#steps-to-follow" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Create a docker container that contains your tool</li>
</ol>
<blockquote>
<div><p>1.1 You can create docker container by first downloading docker on your machine</p>
<p>1.2 To check if docker is installed type docker help in command line or terminal</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker <span class="nb">help</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Once docker displays all the commands it means that it is working</li>
</ol>
<blockquote>
<div><p>2.1 Now create a folder in your machine and then create the “Dockerfile”</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir Rstudio-docker <span class="o">&amp;&amp;</span> <span class="nb">cd</span> Rstudio-docker
nano Dockerfile
</pre></div>
</div>
<p>2.2 Dockerfile is the basic text file that will be the base of your docker image. So here is an example of Rstudio “Dockerfile”</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>FROM rocker/rstudio:3.5.2

RUN apt-get update <span class="se">\</span>
<span class="o">&amp;&amp;</span> apt-get install -y lsb wget apt-transport-https python2.7 python-requests curl supervisor nginx gnupg2

RUN wget -qO - https://packages.irods.org/irods-signing-key.asc <span class="p">|</span> apt-key add - <span class="se">\</span>
<span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;deb [arch=amd64] https://packages.irods.org/apt/ xenial main&quot;</span> &gt; /etc/apt/sources.list.d/renci-irods.list <span class="se">\</span>
<span class="o">&amp;&amp;</span> apt-get update <span class="se">\</span>
<span class="o">&amp;&amp;</span> apt-get install -y irods-icommands

ADD https://github.com/hairyhenderson/gomplate/releases/download/v2.5.0/gomplate_linux-amd64 /usr/bin/gomplate
RUN chmod a+x /usr/bin/gomplate

COPY run.sh /usr/local/bin/run.sh
COPY nginx.conf.tmpl /nginx.conf.tmpl
COPY rserver.conf /etc/rstudio/rserver.conf
COPY supervisor-nginx.conf /etc/supervisor/conf.d/nginx.conf
COPY supervisor-rstudio.conf /etc/supervisor/conf.d/rstudio.conf

ENV REDIRECT_URL <span class="s2">&quot;http://localhost&quot;</span>
ENV PASSWORD <span class="s2">&quot;rstudio1&quot;</span>

RUN bash /etc/cont-init.d/userconf

ENTRYPOINT <span class="o">[</span><span class="s2">&quot;/usr/local/bin/run.sh&quot;</span><span class="o">]</span>
</pre></div>
</div>
<p>2.3 Once you create the “Dockerfile”, you need to build the container</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker build -t rstudio .
</pre></div>
</div>
<p>2.4 Test the docker image by typing the following command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run rstudio
</pre></div>
</div>
<p>2.5 Now tag the image with your dockerhub-username followed by the image name.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker tag rstudio username/rstudio
</pre></div>
</div>
<p>2.6 Now login and then push the container to DockerHub where it can be accessed by others</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker login -u username
docker push username/rstudio
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Login to the <a class="reference external" href="https://de.cyverse.org/de/">discovery_environment</a></li>
</ol>
<blockquote>
<div>3.1 Go to Apps on the left hand corner</div></blockquote>
<p><img alt="De app" src="./img/apps.png" /></p>
<blockquote>
<div><p>3.2 Click on manage tools in the top ride side of the window</p>
<p>3.3 Click on Tools –&gt; Add tool</p>
<p>3.4 Enter name you want to give your tool and fill the form with the required fields</p>
</div></blockquote>
<p><img alt="De create tool" src="_images/imgrstudio.png" /></p>
<p>3.5 Below are specific ports for vice tools in DE which need to be entered as ENTRYPOINTS based on the tool you are creating.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="57%" />
<col width="43%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Type</td>
<td>Port</td>
</tr>
<tr class="row-even"><td>Jupyter</td>
<td>8888</td>
</tr>
<tr class="row-odd"><td>Rstudio</td>
<td>80</td>
</tr>
<tr class="row-even"><td>Shiny</td>
<td>3838</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="section" id="summary">
<h3><em>Summary</em><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h3>
<p><strong>Next Steps:</strong></p>
<p>The above tutorial can be repeated to add tools of your choice by just replacing certain
like container name, login id , tool name.
Some common next steps include:</p>
<ol class="arabic simple">
<li>Always have a Dockerfile before trying to build your container</li>
</ol>
</div>
<hr class="docutils" />
<div class="section" id="additional-information-help">
<h3>Additional information, help<a class="headerlink" href="#additional-information-help" title="Permalink to this headline">¶</a></h3>
<p>Search for an answer:
<a href="http://learning.cyverse.org" target="blank">CyVerse Learning Center</a> or
<a href="https://wiki.cyverse.org" target="blank">CyVerse Wiki</a></p>
<p>Post your question to the user forum:
<a href="http://ask.iplantcollaborative.org/questions" target="blank">Ask CyVerse</a></p>
<hr class="docutils" />
<p><strong>Fix or improve this documentation</strong></p>
<ul class="simple">
<li>On Github: <a href="FIX_FIX_FIX_FIX_FIX_FIX_FIX_FIX_FIX_FIX_FIX_FIX_FIX_FIX_FIX" target="blank">Github Repo Link</a></li>
<li>Send feedback: <a class="reference external" href="mailto:Tutorials&#37;&#52;&#48;CyVerse&#46;org">Tutorials<span>&#64;</span>CyVerse<span>&#46;</span>org</a></li>
</ul>
<hr class="docutils" />
<p><a class="reference external" href="http://learning.cyverse.org/"><img alt="Home_Icon" src="_images/homeicon.png" style="width: 25px; height: 25px;" /></a>
<a class="reference external" href="http://learning.cyverse.org/">Learning Center Home</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, CyVerse

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>